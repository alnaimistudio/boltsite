"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[410],{5262:function(e,t,s){s.d(t,{V:function(){return a}});var r=s(5893);s(7294);let n={sm:"w-12 h-12",md:"w-24 h-24",lg:"w-32 h-32"};function a(e){let{color:t="brown",pattern:s="solid",className:a="",size:i="md"}=e,l=i?n[i]:"",c="".concat(l," ").concat(a).trim();return(0,r.jsxs)("svg",{viewBox:"0 0 100 100",className:c,fill:t,xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M80 50C80 67.6731 65.6731 82 48 82C30.3269 82 16 67.6731 16 50C16 32.3269 30.3269 18 48 18C65.6731 18 80 32.3269 80 50Z",fill:t}),"spotted"===s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("circle",{cx:"35",cy:"40",r:"5",fill:"white"}),(0,r.jsx)("circle",{cx:"60",cy:"45",r:"4",fill:"white"}),(0,r.jsx)("circle",{cx:"45",cy:"60",r:"6",fill:"white"})]}),"dappled"===s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M35 40C35 42.7614 32.7614 45 30 45C27.2386 45 25 42.7614 25 40C25 37.2386 27.2386 35 30 35C32.7614 35 35 37.2386 35 40Z",fill:"white",fillOpacity:"0.5"}),(0,r.jsx)("path",{d:"M60 45C60 47.7614 57.7614 50 55 50C52.2386 50 50 47.7614 50 45C50 42.2386 52.2386 40 55 40C57.7614 40 60 42.2386 60 45Z",fill:"white",fillOpacity:"0.5"})]}),"striped"===s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M30 30L70 70",stroke:"white",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M40 30L80 70",stroke:"white",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M20 30L60 70",stroke:"white",strokeWidth:"2"})]})]})}},9410:function(e,t,s){s.d(t,{P:function(){return m}});var r=s(5893),n=s(7294),a=s(5262),i=s(7632);let l=()=>(0,r.jsx)("span",{className:"text-yellow-500",children:"\uD83D\uDC51"}),c=e=>{let{color:t}=e;return(0,r.jsx)("span",{style:{color:t},children:"\uD83C\uDFC5"})},o={1:.5,2:.3,3:.2},d=(e,t)=>Math.floor(t*(o[e]||0));function m(e){let{track:t,playerHorse:s,onRaceFinish:o}=e,[m,h]=(0,n.useState)(3),[p,u]=(0,n.useState)(!1),[x,f]=(0,n.useState)([]),[g,j]=(0,n.useState)([]),[v,y]=(0,n.useState)(!1),[b,N]=(0,n.useState)(0);(0,n.useRef)();let w=(0,n.useRef)(),[C,D]=(0,n.useState)([]),[k,S]=(0,n.useState)(!1),[M,I]=(0,n.useState)(!1),[U,A]=(0,n.useState)(0),[E,R]=(0,n.useState)(!1),F=Array.from({length:Math.floor(t.distance/250)},(e,t)=>(t+1)*250);(0,n.useEffect)(()=>{let e={id:"bot-1",name:"الحصان الأول",color:"black",pattern:"solid",speed:75,stamina:70,strength:65,agility:72,endurance:68,sex:"male",currentSpeed:0,energy:100,distance:t.distance,currentDistance:0,lane:1,position:1,rank:1,specialAbilities:[],championships:0,finished:!1,isBot:!0};f([{...s,currentSpeed:0,energy:100,distance:t.distance,currentDistance:0,lane:4,position:1,rank:1,finished:!1,isBot:!1},e])},[s]),(0,n.useEffect)(()=>{if(m>0){let e=setTimeout(()=>h(e=>e-1),1e3);return()=>clearTimeout(e)}0!==m||p||u(!0)},[m,p]),(0,n.useEffect)(()=>{D(x.map((e,t)=>({horseId:e.id,position:t+1,currentDistance:0,lane:t+1,speed:e.currentSpeed,stamina:e.energy,energy:e.energy,isFinished:!1})))},[x]),(0,n.useEffect)(()=>{if(!p)return;let e=setInterval(()=>{A(t=>{let s=t+100;return s>=12e4&&(I(!0),clearInterval(e)),s}),D(e=>e.map(s=>{let r=s.speed*(s.stamina/100);s.position>e.length/2&&.3>Math.random()&&(r*=1.3);let n=100*r/12e4*t.distance,a=Math.min(s.currentDistance+n,t.distance);return{...s,currentDistance:a,speed:r,isFinished:a>=t.distance}}).sort((e,t)=>t.currentDistance-e.currentDistance).map((e,t)=>({...e,position:t+1})))},100);return()=>clearInterval(e)},[p,x,U]),(0,n.useEffect)(()=>{if(p&&!v)return w.current=setInterval(()=>{N(e=>e+1)},1e3),()=>{w.current&&clearInterval(w.current)}},[p,v]);let T=()=>{let e=x.map(e=>{let s=e.speed*(e.stamina/100)*(1+(.2*Math.random()-.1)),r=t.distance/s*(1+.1*Math.random()),n=Array.from({length:4},()=>s*(1+(.2*Math.random()-.1)));return{...e,currentSpeed:s,currentDistance:t.distance,finished:!0,finishTime:r,performance:{speedAtCheckpoints:n,finalSpeed:s,energyRemaining:e.energy*(.3*Math.random()+.2)}}}).sort((e,t)=>(e.finishTime||0)-(t.finishTime||0)).map((e,t)=>({...e,position:t+1,rank:t+1}));f(e),j(e),y(!0),u(!1),R(!0),o(e.map(e=>{var s,r,n;return{id:(0,i.Z)(),horseId:e.id,date:new Date,position:e.position,prize:d(e.position,t.prizePool),trackId:t.id,time:Math.floor(e.finishTime||0),earnings:d(e.position,t.prizePool),timestamp:Date.now(),performance:{speedAtCheckpoints:(null===(s=e.performance)||void 0===s?void 0:s.speedAtCheckpoints)||[],finalSpeed:(null===(r=e.performance)||void 0===r?void 0:r.finalSpeed)||0,energyRemaining:(null===(n=e.performance)||void 0===n?void 0:n.energyRemaining)||0}}}))};return m>0?(0,r.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,r.jsxs)("div",{className:"text-6xl font-bold animate-pulse",children:["يبدأ السباق خلال ",m,"..."]})}):v?(0,r.jsxs)("div",{className:"h-[60vh] overflow-auto p-3",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-center mb-3",children:"نتائج السباق"}),(0,r.jsx)("div",{className:"grid gap-2",children:x.sort((e,t)=>(e.rank||999)-(t.rank||999)).map((e,s)=>(0,r.jsxs)("div",{className:"bg-secondary/10 rounded-lg p-2 flex items-center gap-2 transform transition-all hover:scale-102",children:[(0,r.jsxs)("div",{className:"text-2xl",children:[0===s&&(0,r.jsx)(l,{}),1===s&&(0,r.jsx)(c,{color:"#C0C0C0"}),2===s&&(0,r.jsx)(c,{color:"#CD7F32"}),s>2&&(0,r.jsx)("span",{className:"text-base font-bold",children:s+1})]}),(0,r.jsx)("div",{className:"w-8 h-8",children:(0,r.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-contain filter brightness-110"})}),(0,r.jsxs)("div",{className:"flex-1 text-sm",children:[(0,r.jsx)("div",{className:"font-bold",children:e.name}),(0,r.jsxs)("div",{className:"text-xs opacity-75",children:["المسافة: ",Math.round(e.currentDistance),"م | السرعة: ",Math.round(e.currentSpeed)," | الطاقة: ",Math.round(e.energy),"%"]})]}),0===s&&(0,r.jsxs)("div",{className:"text-base font-bold text-yellow-500",children:[t.prizePool," \uD83D\uDCB0"]})]},e.id))})]}):(0,r.jsxs)("div",{className:"h-[60vh] p-2 flex flex-col gap-2",children:[(0,r.jsxs)("div",{className:"bg-secondary/10 rounded-lg p-2 flex justify-between items-center text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"font-bold",children:t.name}),(0,r.jsx)("div",{className:"text-gray-400",children:"|"}),(0,r.jsxs)("div",{className:"text-gray-400",children:[t.distance,"م"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"font-mono font-bold text-yellow-500",children:"".concat(Math.floor(b/60).toString().padStart(2,"0"),":").concat((b%60).toString().padStart(2,"0"))}),p&&!v&&(0,r.jsx)("button",{onClick:()=>{p&&!v&&T()},className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm",children:"تخطي للنتيجة"})]})]}),(0,r.jsxs)("div",{className:"h-[55%] bg-secondary/10 rounded-lg p-2 relative overflow-hidden",children:[Array.from({length:4}).map((e,t)=>(0,r.jsx)("div",{className:"absolute left-0 right-0 border-t border-dashed border-gray-600/30",style:{top:"".concat((t+1)*20,"%")}},"lane-".concat(t))),F.map(e=>{let s=e/t.distance*100;return(0,r.jsx)("div",{className:"absolute top-0 bottom-0 border-l border-dashed border-yellow-500/30 flex flex-col items-center",style:{right:"".concat(s,"%")},children:(0,r.jsxs)("div",{className:"absolute top-1 -translate-x-1/2 text-[10px] font-bold text-yellow-500/70 bg-background/50 px-1.5 py-0.5 rounded",children:[e,"م"]})},"checkpoint-".concat(e))}),x.map((e,s)=>{let n=e.currentDistance/t.distance*100;return(0,r.jsx)("div",{className:"absolute transition-all duration-100",style:{top:"".concat((s+1)*20-10,"%"),right:"".concat(100-n,"%"),transform:"scaleX(-1)"},children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(a.V,{color:e.color,pattern:e.pattern,size:"md",className:"transform -translate-x-1/2"}),(0,r.jsxs)("div",{className:"absolute top-full mt-1 left-1/2 -translate-x-1/2 whitespace-nowrap text-xs",style:{transform:"scaleX(-1)"},children:[(0,r.jsx)("div",{className:"font-bold",children:e.name}),(0,r.jsxs)("div",{className:"text-gray-400",children:["السرعة: ",Math.round(e.currentSpeed)," | الطاقة: ",Math.round(e.energy),"%"]})]})]})},e.id)}),(0,r.jsx)("div",{className:"absolute top-0 bottom-0 left-0 w-1 bg-yellow-500"})]}),(0,r.jsxs)("div",{className:"h-[35%] bg-secondary/10 rounded-lg p-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,r.jsx)(l,{}),(0,r.jsx)("h3",{className:"text-xs font-bold",children:"الترتيب الحالي"})]}),(0,r.jsx)("div",{className:"grid grid-rows-4 gap-1 h-[calc(100%-1.5rem)]",children:[...x].sort((e,t)=>(e.rank||999)-(t.rank||999)).map((e,t)=>(0,r.jsxs)("div",{className:"bg-secondary/20 rounded-lg px-2 py-1.5 flex items-center gap-2 transform transition-all hover:scale-102",children:[(0,r.jsxs)("div",{className:"text-xs font-bold",children:[0===t&&(0,r.jsx)("span",{className:"text-yellow-500",children:"#1"}),1===t&&(0,r.jsx)("span",{className:"text-gray-400",children:"#2"}),2===t&&(0,r.jsx)("span",{className:"text-amber-600",children:"#3"}),t>2&&(0,r.jsxs)("span",{children:["#",t+1]})]}),(0,r.jsx)("div",{className:"flex-1 font-bold text-sm truncate",children:e.name})]},e.id))})]})]})}},7632:function(e,t,s){let r;s.d(t,{Z:function(){return l}});var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let a=new Uint8Array(16),i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));var l=function(e,t,s){if(n.randomUUID&&!t&&!e)return n.randomUUID();let l=(e=e||{}).random||(e.rng||function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(a)})();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,t){s=s||0;for(let e=0;e<16;++e)t[s+e]=l[e];return t}return function(e,t=0){return i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]}(l)}}}]);