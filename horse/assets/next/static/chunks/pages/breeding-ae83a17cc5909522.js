(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[319],{2642:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/breeding",function(){return r(9791)}])},9791:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var s=r(5893),n=r(7294),a=r(2671),i=r(5802),d=r(1552);let l=(0,r(4102).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var o=r(1163),c=r(7632);function u(e,t){return Math.min(100,Math.max(1,Math.floor((e+t)/2+(10*Math.random()-5))))}function m(){let{state:e,dispatch:t}=(0,a.G)(),r=(0,o.useRouter)(),[m,h]=(0,n.useState)(null),[g,p]=(0,n.useState)(null),[f,x]=(0,n.useState)(!1),y=e.user.horses.filter(e=>"male"===e.sex),b=e.user.horses.filter(e=>"female"===e.sex),v=m&&g&&e.user.coins>=1e3,N=t=>e.breedingPairs.some(e=>(e.fatherId===t.id||e.motherId===t.id)&&"breeding"===e.status),j=e=>{"ready"===e.status&&e.offspringId&&(t({type:"UPDATE_BREEDING_PAIR",payload:{...e,status:"claimed"}}),t({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"success",message:"تم استلام المهر الجديد بنجاح!",duration:5e3}}))},w=e=>{let t=e-Date.now();return"".concat(Math.floor(t/864e5),"d ").concat(Math.floor(t%864e5/36e5),"h")};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white p-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,s.jsxs)("button",{onClick:()=>r.push("/"),className:"flex items-center gap-2 text-gray-400 hover:text-white",children:[(0,s.jsx)(i.Z,{}),"العودة"]})}),e.breedingPairs.length>0&&(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"التزاوج الجاري"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.breedingPairs.map(t=>{let r=e.user.horses.find(e=>e.id===t.fatherId),n=e.user.horses.find(e=>e.id===t.motherId),a="ready"===t.status;return(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.Z,{className:"w-5 h-5 text-blue-400"}),(0,s.jsx)("span",{children:w(t.endTime)})]}),(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"breeding"===t.status?"جاري التزاوج":"جاهز للمطالبة"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"الأب"}),(0,s.jsx)("div",{className:"font-bold",children:null==r?void 0:r.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"الأم"}),(0,s.jsx)("div",{className:"font-bold",children:null==n?void 0:n.name})]})]}),a&&(0,s.jsx)("button",{onClick:()=>j(t),className:"w-full px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg",children:"استلام المهر"})]},t.fatherId+t.motherId)})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-4",children:"اختر الأب"}),(0,s.jsx)("div",{className:"grid gap-4",children:y.map(e=>(0,s.jsxs)("button",{onClick:()=>{h(e),x(!0)},disabled:N(e),className:"p-4 rounded-lg text-left ".concat((null==m?void 0:m.id)===e.id?"bg-blue-600":N(e)?"bg-gray-700 opacity-50":"bg-gray-800 hover:bg-gray-700"),children:[(0,s.jsx)("div",{className:"font-bold",children:e.name}),(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:["السرعة: ",e.speed," | القوة: ",e.strength]})]},e.id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-4",children:"اختر الأم"}),(0,s.jsx)("div",{className:"grid gap-4",children:b.map(e=>(0,s.jsxs)("button",{onClick:()=>{p(e),x(!0)},disabled:N(e),className:"p-4 rounded-lg text-left ".concat((null==g?void 0:g.id)===e.id?"bg-blue-600":N(e)?"bg-gray-700 opacity-50":"bg-gray-800 hover:bg-gray-700"),children:[(0,s.jsx)("div",{className:"font-bold",children:e.name}),(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:["السرعة: ",e.speed," | القوة: ",e.strength]})]},e.id))})]})]}),(0,s.jsxs)("div",{className:"mt-8",children:[f&&m&&g&&(0,s.jsxs)("div",{className:"text-center mb-4 flex items-center justify-center gap-2",children:[(0,s.jsx)(l,{className:"w-5 h-5 text-yellow-500"}),(0,s.jsxs)("span",{children:["نسبة نجاح التزاوج: ",m&&g?.8:0,"%"]})]}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsxs)("button",{onClick:()=>{var e,r,s,n;if(!m||!g||!v)return;let a=Date.now(),i={fatherId:m.id,motherId:g.id,startTime:a,endTime:a+2592e5,status:"breeding",cooldownEndTime:a+6048e5,price:1e3},d={id:(0,c.Z)(),name:function(){let e=["صقر","نجم","برق","ريح","فجر","نور","شمس","قمر","سهم","رعد"],t=["العرب","الصحراء","السماء","الليل","الفجر","النجوم","البادية","الأصيل"];return"".concat(e[Math.floor(Math.random()*e.length)]," ").concat(t[Math.floor(Math.random()*t.length)])}(),color:(e=m.color,r=g.color,.5>Math.random()?e:r),pattern:(s=m.pattern,n=g.pattern,.5>Math.random()?s:n),image:"/horsephoto.png",speed:u(m.speed,g.speed),stamina:u(m.stamina,g.stamina),strength:u(m.strength,g.strength),agility:u(m.agility,g.agility),endurance:u(m.endurance,g.endurance),championships:0,sex:.5>Math.random()?"male":"female",races:0,wonRaces:0,goldWon:0,raceHistory:[],parents:{father:m.id,mother:g.id}};t({type:"SPEND_COINS",payload:1e3}),t({type:"ADD_BREEDING_PAIR",payload:{...i,offspringId:d.id}}),t({type:"ADD_HORSE",payload:d}),h(null),p(null)},disabled:!v,className:"px-8 py-4 rounded-lg ".concat(v?"bg-green-600 hover:bg-green-700":"bg-gray-700 cursor-not-allowed"),children:["بدء التزاوج (",1e3," عملة)"]})})]})]})}},7632:function(e,t,r){"use strict";let s;r.d(t,{Z:function(){return d}});var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let a=new Uint8Array(16),i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));var d=function(e,t,r){if(n.randomUUID&&!t&&!e)return n.randomUUID();let d=(e=e||{}).random||(e.rng||function(){if(!s&&!(s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(a)})();if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=d[e];return t}return function(e,t=0){return i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]}(d)}},4102:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var s=r(7294);/**
 * @license lucide-react v0.471.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.471.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.471.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:d="",children:l,iconNode:o,...c},u)=>(0,s.createElement)("svg",{ref:u,...i,width:t,height:t,stroke:e,strokeWidth:n?24*Number(r)/Number(t):r,className:a("lucide",d),...c},[...o.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(l)?l:[l]])),l=(e,t)=>{let r=(0,s.forwardRef)(({className:r,...i},l)=>(0,s.createElement)(d,{ref:l,iconNode:t,className:a(`lucide-${n(e)}`,r),...i}));return r.displayName=`${e}`,r}},5802:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(4102).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},1552:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(4102).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])}},function(e){e.O(0,[774,888,179],function(){return e(e.s=2642)}),_N_E=e.O()}]);